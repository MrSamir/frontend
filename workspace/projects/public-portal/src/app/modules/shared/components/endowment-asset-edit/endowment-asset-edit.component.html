<div class="d-flex justify-content-center my-6" *ngIf="!this.Assets || this.Assets?.length === 0">
  <a href="javascript:void(0)" class="addBox my-6 py-3 col-xl-5" (click)="onAddNewAssetClicked(addData)"
    *ngIf="!viewOnly">
    <!-- <svg-icon styleClass="fa-3x mr-3 mb-2 " icon="add-icon"></svg-icon> -->
    <!-- <span>يجب إضافة أصل واحد على الأقل</span> -->
    <span>{{
      "EndowmentModule.EndowmentRgistrationService.AssetAdditionConditionLabel"
      | localize
      }}</span>
  </a>
</div>

<div class="d-flex justify-content-end my-6">
  <a href="javascript:void(0)" class="btn btn-outline-awq-secondary px-6 border-0 shadow-sm"
    (click)="onAddNewAssetClicked(addData)" *ngIf="!viewOnly">
    <!-- <svg-icon styleClass="h1 mr-2" icon="add-icon"></svg-icon> -->
    <!-- <span>إضافة أصل آخر</span> -->
    <span>{{
      "EndowmentModule.EndowmentRgistrationService.AddNewAssetLabel"
      | localize
      }}</span>
  </a>
</div>

<div *ngIf="!!this.Assets && this.Assets?.length > 0">



  <p-table class="table table-striped table-hover" #dt [value]="primengTableHelper.records"
  [totalRecords]="primengTableHelper.totalRecordsCount" [loading]="primengTableHelper.isLoading"
  [rows]="primengTableHelper.defaultRecordsCountPerPage" [paginator]="true"
  [rowsPerPageOptions]="primengTableHelper.predefinedRecordsCountPerPage"
  [responsive]="primengTableHelper.isResponsive" [showCurrentPageReport]="true"
  [currentPageReportTemplate]="' عدد السطور'+ primengTableHelper.totalRecordsCount.toString()"
  [resizableColumns]="primengTableHelper.resizableColumns">
  <ng-template pTemplate="header">
    <tr>
      <th class="text-center" scope="col">#</th>
      <th class="text-center" scope="col">
        {{
        "EndowmentModule.EndowmentRgistrationService.AssetTypeLabel"
        | localize
        }}
      </th>
      <th class="text-center" scope="col">
        {{
        "EndowmentModule.EndowmentRgistrationService.ReviewAssetBtnLabel"
        | localize
        }}
      </th>
      <th class="text-center" scope="col" *ngIf="!viewOnly">
        {{
        "EndowmentModule.EndowmentRgistrationService.EditAssetBtnLabel"
        | localize
        }}
      </th>
      <th class="text-center" scope="col" *ngIf="!viewOnly">
        {{
        "EndowmentModule.EndowmentRgistrationService.DeleteAssetBtnLabel"
        | localize
        }}
      </th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-record="$implicit" let-i="rowIndex">
      <tr>
          <td class="text-center" scope="col">
            {{ i + 1 }}
          </td>
          <td class="text-center" scope="col">
            {{ getAssetType(record.assetTypeId!) | localize }}
          </td>
          <td class="text-center" scope="col">
            <button class="btn btn-sm btn-outline-awq-secondary rounded"
              (click)="onViewTableCellClicked(addData, record.id)" >
              <svg-icon icon="eye"></svg-icon>
            </button>
          </td>
          <td class="text-center" scope="col" *ngIf="!viewOnly">
            <button class="btn btn-sm btn-outline-awq-secondary rounded"
              (click)="onEditTableCellClicked(addData, record.id)">
              <svg-icon icon="pencil"></svg-icon>
            </button>
          </td>
          <td class="text-center" scope="col" *ngIf="!viewOnly">
            <button class="btn btn-sm btn-outline-danger rounded" (click)="onDeleteTableCellClicked(record, i)">
              <svg-icon icon="trash-alt"></svg-icon>
            </button>
          </td>
      </tr>
  </ng-template>
</p-table>



 
</div>

<ng-template #addData let-modal>
  <form name="form" #assetForm="ngForm">
    <div class="modal-header">
      <!-- <h2>بيانات الأصل</h2> -->
      <h2>
        {{
        "EndowmentModule.EndowmentRgistrationService.AssetDetailsLabel"
        | localize
        }}
      </h2>
    </div>
    <div class="modal-body">
      <div class="row row-cols-1 row-cols-md-2">
        <div class="form-group col">
          <!-- <label class="col-form-label block">نوع الأصل<span class="text-danger">*</span></label> -->
          <label class="col-form-label block">{{
            "EndowmentModule.EndowmentRgistrationService.AssetTypeLabel"
            | localize
            }}<span class="text-danger">*</span></label>
          <select class="custom-select" [hidden]="viewOnly" #assetTypeId="ngModel" [disabled]="this.isEditRequested"
            (change)="changeAssetType()" name="assetTypeId" [(ngModel)]="newAsset!.assetTypeId" required>
            <option [value]="null" selected></option>
            <option *ngFor="let assetType of AssetTypeLookup" value="{{ assetType.id }}">
              {{ assetType.name }}
            </option>
          </select>


        </div>


      </div>

      <app-shared-business-entity-asset #businessEntityAsset="ngModel" name="businessEntityAsset"
        *ngIf="newAsset?.assetTypeId == 1" [viewOnly]="viewOnly" [AssetTypeId]="newAsset!.assetTypeId"
        [(ngModel)]="newAsset!.businessEntityAssetObj" [assetInfoModel]="newAsset!">
      </app-shared-business-entity-asset>
      <app-shared-realestate-asset #realEstateAsset="ngModel" *ngIf="newAsset?.assetTypeId == 2" [viewOnly]="viewOnly"
        [AssetTypeId]="newAsset!.assetTypeId" [(ngModel)]="newAsset!.realEstateAssetObj" name="realEstateAsset"
        [assetInfoModel]="newAsset!"></app-shared-realestate-asset>
      <app-shared-fiscal-asset #fiscalAsset="ngModel" *ngIf="newAsset?.assetTypeId == 3" [viewOnly]="viewOnly"
        [AssetTypeId]="newAsset!.assetTypeId" [(ngModel)]="newAsset!.fiscalAssetObj" name="fiscalAsset"
        [assetInfoModel]="newAsset!"></app-shared-fiscal-asset>
      <app-shared-movable-asset #movableAsset="ngModel" *ngIf="newAsset?.assetTypeId == 4" [viewOnly]="viewOnly"
        [AssetTypeId]="newAsset!.assetTypeId" [(ngModel)]="newAsset!.movableAssetObj" name="movableAsset"
        [assetInfoModel]="newAsset!"></app-shared-movable-asset>
      <app-shared-monetary-asset #monetaryAsset="ngModel" *ngIf="newAsset?.assetTypeId == 5" [viewOnly]="viewOnly"
        [AssetTypeId]="newAsset!.assetTypeId" [(ngModel)]="newAsset!.monetaryAssetObj" name="monetaryAsset"
        [assetInfoModel]="newAsset!"></app-shared-monetary-asset>

      <app-shared-animal-or-agricultural-asset #animalOrAgriculturalAsset="ngModel" *ngIf="newAsset?.assetTypeId == 6"
        [viewOnly]="viewOnly" [AssetTypeId]="newAsset!.assetTypeId" [(ngModel)]="newAsset!.animalOrAgriculturalAssetObj"
        name="animalOrAgriculturalAsset" [assetInfoModel]="newAsset!"></app-shared-animal-or-agricultural-asset>

      <app-shared-particular-benefit-asset #particularBenefitAsset="ngModel" *ngIf="newAsset?.assetTypeId == 7"
        [viewOnly]="viewOnly" [AssetTypeId]="newAsset!.assetTypeId" [(ngModel)]="newAsset!.particularBenefitAssetObj"
        name="particularBenefitAsset" [assetInfoModel]="newAsset!"></app-shared-particular-benefit-asset>
      <app-shared-intellectual-property-and-trademark-asset #intellectualPropertyAndTrademarkAsset="ngModel"
        *ngIf="newAsset?.assetTypeId == 8" [viewOnly]="viewOnly" [AssetTypeId]="newAsset!.assetTypeId"
        [(ngModel)]="newAsset!.intellectualPropertyAndTrademarkAssetObj" name="intellectualPropertyAndTrademarkAsset"
        [assetInfoModel]="newAsset!"></app-shared-intellectual-property-and-trademark-asset>
    </div>
    <ng-container *ngIf="!isEditRequested && !viewOnly">
      <div class="modal-footer justify-content-center">
        <button type="button" class="btn btn-awq-secondary px-6" [disabled]="assetForm.form?.invalid"
          (click)="onAddBtnClicked()">
          {{'EndowmentModule.EndowmentRgistrationService.AddASubssetBtnLabel' | localize}}</button>
        <!-- <svg-icon styleClass="ml-1 small" icon="plus"></svg-icon> -->
      </div>
    </ng-container>
    <ng-container *ngIf="isEditRequested && !viewOnly">
      <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-warning px-6" [disabled]="assetForm.form?.invalid"
          (click)="onEditBtnClicked()">
          {{'EndowmentModule.EndowmentRgistrationService.EditSubAssetBtnLabel' | localize}}
        </button>
        <button type="button" class="btn btn-outline-awq-secondary px-6" [disabled]="!isNewOrEditAssetValid()"
          (click)="onCancelBtnClicked()">
          {{
          "EndowmentModule.EndowmentRgistrationService.CancelSubAssetBtnLabel"
          | localize
          }}
        </button>
      </div>

    </ng-container>
  </form>
</ng-template>

<div class="aw-btn">
  <button type="button" class="btn btn-awq-secondary"
    (click)="onNextBtnClicked()">{{'EndowmentModule.EndowmentRgistrationService.ButtonNext' | localize}}</button>
  <button type="button" class="btn btn-outline-awq-secondary"
    (click)="onBackBtnClicked()">{{'EndowmentModule.EndowmentRgistrationService.ButtonPreviouse' | localize}}</button>
</div>